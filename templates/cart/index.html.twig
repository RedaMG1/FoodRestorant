{% extends 'base.html.twig' %}

{% block title %}Hello CartController!
{% endblock %}

{% block body %}

	<div class="container mt-5 mb-5">
		<div class="d-flex justify-content-center row">
			<h1 class="justify-content-center">Your cart items</h1>
			<div class="col-md-10">
				{% set totalAmount = 0 %}
				{% for key, cartItem in cartItems %}
					<div class="row p-2 bg-white border rounded">
						<div class="col-md-3 mt-1"><img class="img-fluid img-responsive rounded product-image" src="{{ asset('assets/images/' ~ cartItem.product.image) }}"></div>
						<div class="col-md-6 mt-1">

							<h5>{{ cartItem.product.name }}</h5>
							<div class="mt-1 mb-1 spec-1">
								<p>{{ cartItem.product.description }}</p>
							</div>
							<div class="col-md-3 col-lg-3 col-xl-2 d-flex align-items-center">
								<p class="mb-0 mr-2">Quantity:</p>
								<form method="post" action="{{ path('update_quantity', {'cartItemId': cartItem.id}) }}">
									<select name="quantity" onchange="this.form.submit()">
										<option selected="selected" value="dog">{{ cartItem.quantity }}</option>
										{% for number in range(1, 10) %}
											<option value="{{ number }}">{{ number }}</option>
										{% endfor %}

									</select>
								</form>
								{# <button class="btn btn-link px-2">-</button> #}
							{# <input type="number" class="form-control-sm " value="{{ cartItem.quantity }}" id="customCartQuantity"/> #}
								<!-- Adjust the 'w-50' class to set the width as needed -->
								{# <button class="btn btn-link px-2">+</button> #}
							</div>


						</div>
						<div class="align-items-center align-content-center col-md-3 border-left mt-1">
							<div class="d-flex flex-row align-items-center">
								<h4 class="mr-1">${{ cartItem.product.price * cartItem.quantity}}</h4>
								{% set totalAmount = totalAmount + (cartItem.product.price * cartItem.quantity) %}

							</div>
							<h6 class="text-success">Free shipping</h6>
							<form>
								<div class="d-flex flex-column mt-4">
									<button class="btn btn-primary btn-sm" type="submit" formaction="{{ path('product_details', {'name': cartItem.product.name}) }}">Details</button>
									<button class="btn btn-outline-primary btn-sm mt-2" id="customCartDeleteBtn" type="submit" formaction="{{ path('cart_remove',{id : cartItem.id}) }}" type="button">Delete from cart</button>
								</div>
							</form>
						</div>

					</div>

				{% endfor %}
			</div>
			<div class="row mt-3">
				<div class="col-md-12 offset-md-3">
					<div class="card">
						<div class="card-body">
							<div class="d-flex justify-content-between">
								<h4 class="mb-0">Total Amount:</h4>
								<h4 class="text-primary">${{ totalAmount }}</h4>
							</div>
						</div>
					</div>
				</div>
			</div>
		</div>
		<div class="row justify-content-center mt-2">
			<div class="col-md-2">
				<a href = "{{ path('payement')}}" class="btn btn-primary btn-block">Payment<a>
			</div>
		</div>
	</div>
{% endblock %}
